{"version":3,"sources":["components/Chat/Chat.module.css","components/Header/Header.module.css","components/Registration/Registration.module.css","components/Header/Header.jsx","components/Registration/Registration.jsx","components/Loader/Loader.jsx","components/Chat/Chat.jsx","App.js","index.js"],"names":["module","exports","Header","auth","useContext","Context","useAuthState","user","className","styles","header","onClick","signOut","button","Registration","login","a","firebase","GoogleAuthProvider","provider","signInWithPopup","to","registrationWrapper","Loader","Chat","firestore","useState","text","setText","useCollectionData","collection","orderBy","messages","loading","sendMessage","add","uid","displayName","photoURL","createdAt","FieldValue","serverTimestamp","messageRef","useRef","useEffect","current","scrollTo","chatWrapper","ref","windowChat","map","item","index","message","style","border","marginLeft","src","alt","fontSize","input","onChange","e","currentTarget","value","type","App","path","render","exact","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","createContext","ReactDOM","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.1e6f3433.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"chatWrapper\":\"Chat_chatWrapper__18Tlj\",\"windowChat\":\"Chat_windowChat__4mmu_\",\"input\":\"Chat_input__2Z-VH\",\"message\":\"Chat_message__3ojs3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3DrlF\",\"button\":\"Header_button__24u0d\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"registrationWrapper\":\"Registration_registrationWrapper__3ipXT\",\"button\":\"Registration_button__1CsBt\"};","import React, { useContext } from 'react'\r\nimport styles from './Header.module.css'\r\nimport {useAuthState} from 'react-firebase-hooks/auth'\r\nimport {Context} from '../../index'\r\n\r\nfunction Header() {\r\n    const {auth} = useContext(Context)\r\n    const [user] = useAuthState(auth)\r\n\r\n\r\n    return (\r\n        <div className={styles.header}>\r\n            <div>Чат для всех</div>\r\n            <div>{user \r\n                ?<div onClick={()=>auth.signOut()} className={styles.button}>Выйти</div>\r\n                :<div className={styles.button}>Войти</div>}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Header\r\n","import React, { useContext } from 'react'\r\nimport { Context } from '../..'\r\nimport styles from './Registration.module.css'\r\nimport firebase from 'firebase'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { useAuthState } from 'react-firebase-hooks/auth'\r\n\r\n\r\n\r\nfunction Registration() {\r\n    const {auth} = useContext(Context) //Авторизован или нет\r\n    //далее регистрируемся в Гугле\r\n    const login = async() => {\r\n        const provider = await new firebase.auth.GoogleAuthProvider()\r\n        await auth.signInWithPopup(provider)\r\n    }\r\n\r\n    // получаем авторизовался юзер или нет\r\n    const [user] = useAuthState(auth)\r\n    //если не авторизован редиректим на главную страницу\r\n    if(user) return <Redirect to={'/chat'} />\r\n\r\n    return (\r\n        <div className={{}}>\r\n            <div className={styles.registrationWrapper}>\r\n                <div>\r\n                    <div>Войти с помощью Google Account</div>\r\n                    <div><div onClick={login} className={styles.button}>Войти</div></div>\r\n                </div>    \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Registration\r\n","import React from 'react'\r\nimport './Loader.css'\r\n\r\n\r\n//обычный лоадер\r\nfunction Loader() {\r\n    return (\r\n        <div>\r\n            <div className=\"lds-dual-ring\"></div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loader\r\n","import React, { useContext, useEffect, useRef, useState } from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport styles from './Chat.module.css'\r\nimport {useAuthState} from 'react-firebase-hooks/auth'\r\nimport {Context} from '../../index'\r\nimport {useCollectionData} from 'react-firebase-hooks/firestore'\r\nimport firebase from 'firebase'\r\nimport Loader from '../Loader/Loader'\r\n\r\nfunction Chat() {\r\n    const {auth, firestore} = useContext(Context)\r\n    const [user] = useAuthState(auth)\r\n    const [text, setText] = useState('')\r\n    const [messages, loading] = useCollectionData (\r\n        firestore.collection('messages').orderBy('createdAt')\r\n    )\r\n\r\n    const sendMessage = async () => {\r\n        firestore.collection('messages').add({\r\n            uid: user.uid,\r\n            displayName: user.displayName,\r\n            photoURL: user.photoURL,\r\n            text: text,\r\n            createdAt: firebase.firestore.FieldValue.serverTimestamp()\r\n        })\r\n        setText('')\r\n    }\r\n    let messageRef = useRef(null)\r\n    \r\n    useEffect(()=>{\r\n        if(messageRef.current){\r\n            messageRef.current.scrollTo(0,9999)\r\n        }\r\n    },[messages])\r\n\r\n    if(loading) return <Loader />\r\n\r\n    if(!user) return <Redirect to={'/'}/>\r\n    return (\r\n        <div>\r\n            <div className={styles.chatWrapper}>\r\n                <div ref={messageRef} className={styles.windowChat}>\r\n                    {messages.map((item, index)=> \r\n                        <div key={index} className={styles.message} style={{\r\n                            border: item.uid === user.uid ? \"4px solid green\" : \"4px solid blue\",\r\n                            marginLeft: item.uid === user.uid ? \"auto\" : \"10px\",\r\n                        }}>\r\n                            <div>\r\n                                <img src={item.photoURL} alt=\"Картинка\" />\r\n                            </div>\r\n                            <div style={{marginLeft: 10}}>\r\n                                <div style={{fontSize: 30}}>{item.displayName}</div>\r\n                                <div style={{fontSize: 20}}>{item.text}</div>\r\n                            </div>\r\n                        </div>)}\r\n                </div>\r\n            </div>\r\n            <div className={styles.input}>\r\n                <input onChange={e=>setText(e.currentTarget.value)} type=\"text\" value={text} /><span onClick={sendMessage}>Отправить</span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat\r\n","import './App.css';\nimport Header from './components/Header/Header';\nimport Registration from './components/Registration/Registration';\nimport Chat from './components/Chat/Chat'\nimport {Route} from 'react-router-dom'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Header /> \n      <Route path={'/'} render={()=><Registration/>} exact/>\n      <Route path={'/chat'} render={()=><Chat/>} exact/>\n    </div>\n  );\n}\n\nexport default App;\n","import React, { createContext } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport firebase from 'firebase'\nimport 'firebase/firestore'\nimport 'firebase/auth'\nimport {HashRouter} from 'react-router-dom'\n\n\n//инициализируем firebase\nfirebase.initializeApp({\n  apiKey: \"AIzaSyCmciKAlqKvGbzLtiQc68rSgpWfhf43MFA\",\n  authDomain: \"chat-firebase-42eec.firebaseapp.com\",\n  projectId: \"chat-firebase-42eec\",\n  storageBucket: \"chat-firebase-42eec.appspot.com\",\n  messagingSenderId: \"482906442540\",\n  appId: \"1:482906442540:web:4a5144eab850b76bd8ba89\",\n  measurementId: \"G-PCYG3KQVHP\"\n});\n\nexport const Context = createContext(null) //создаем контект для легкого пробрасования данных\nconst auth = firebase.auth() //Получаем авторизован или нет\nconst firestore = firebase.firestore() //хранилище\n\nReactDOM.render(\n    <Context.Provider value ={{\n      firebase,\n      auth,\n      firestore\n    }}>\n      <HashRouter>\n        <App />\n      </HashRouter>\n    </Context.Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}